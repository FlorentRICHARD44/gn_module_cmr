<h2 mat-dialog-title>Ajout d'une visite pour chaque {{data.module.forms.site.label}}</h2>
<mat-dialog-content>
  <table class="table table-striped table-hover">
    <thead class="thead-light">
      <tr>
        <th [colSpan]="data.module.forms.site.batch_visit_display_list.length">{{data.module.forms.site.label}}</th>
        <th>Cr√©er visite</th>
        <th>Observation</th>
      </tr>
      <tr>
        <th class="text-right font-italic" [colSpan]="data.module.forms.site.batch_visit_display_list.length">Tous</th>
        <th class="text-center"><input type="checkbox" (change)="onAllVisitsChechboxChange($event.target.checked)" checked></th>
        <th class="text-center"><input type="checkbox" (change)="onAllObservationsChechboxChange($event.target.checked)"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let site of data.sites">
        <td *ngFor="let attr of data.module.forms.site.batch_visit_display_list">{{site[attr]}}</td>
        <td class="text-center"><input type="checkbox" checked id="site-visit-{{site.id_site}}" (change)="onVisitCheckboxChange(site.id_site, $event.target.checked)"></td>
        <td class="text-center"><input type="checkbox" id="site-observ-{{site.id_site}}"></td>
      </tr>
    </tbody>
  </table>
  <hr class="mt-3 mb-3">
  <pnx-dynamic-form-generator
    class="obj-form"
    #dynamicForm
    [autoGenerated]="true"
    [myFormGroup]="genericVisitForm"
    [formsDefinition]="visitFormDefinitions"
  ></pnx-dynamic-form-generator>

</mat-dialog-content>
<div mat-dialog-actions class="button-container">
  <button class="btn btn-primary" (click)="dialogRef.close()">Annuler</button>
  <button class="btn btn-success ml-4" [disabled]="!genericVisitForm.valid || bSaving" (click)="onSubmit()">
    <i class="fa fa-check" *ngIf="!bSaving"></i>
    <i class="fa fa-spinner fa-spin" *ngIf="bSaving"></i>&nbsp;Valider</button>
</div>